{% extends 'base.html.twig' %}

{% macro printCategoryRow(form) %}
    {% block _categories_entry_widget %}
    <div class="form-group input-group" id="inputCategory">
        <div class="input-group-prepend">
            {{ form_label(form, 'Catégorie', {
                'label_attr': {'class': 'input-group-text'}}) }}
        </div>
        {{ form_widget(form) }}
    </div>
    {% endblock %}
{% endmacro %}

{% block content %}
    <div class="row">
        <div class="col-2">
            <button class="btn btn-primary btnSelect" name="btnSelect" data="searchJob" data-page="addOffer" id="btnAddSearchJob">Je recherche un emploi</button>
        </div>
        <div class="col">
            <button class="btn btn-primary btnSelect" name="btnSelect" data="offerJob" data-page="addOffer" id="btnAddJobOffer">J'offre un emploi</button>
        </div>
    </div>

    {{ form_start(addOfferForm) }}
    {% import _self as formMacro %}
    <div class="invisible" id="formAddOffer" data-prototype="{{ formMacro.printCategoryRow(addOfferForm.categories.vars.prototype)|e('html_attr') }}" data-index="{{ addOfferForm.categories|length }}">

    {{ form_row(addOfferForm.title)}}
        <div class="form-group input-group">
            <div class="input-group-prepend">
                {{ form_label(addOfferForm.city, 'Lieu de travail', {
                    'label_attr': {'class': 'input-group-text'}}) }}
            </div>
            {{ form_widget(addOfferForm.city) }}
        </div>
        {{ formMacro.printCategoryRow(addOfferForm.category) }}
        <a href="#" id="addCategory">
            <span class="fas fa-plus-circle"></span>Ajouter une catégorie
        </a>
    {#  {{ form_row(addOfferForm.documents) }} #}
        {{ form_row(addOfferForm.description) }}
        <div class="row d-flex justify-content-between mx-0">
            {{ form_row(addOfferForm.save) }}
            {{ form_row(addOfferForm.publish) }}
        </div>
        {{ form_end(addOfferForm, {'render_rest': false}) }}
    </div>
{% endblock %}